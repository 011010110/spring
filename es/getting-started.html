<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 24-mar-2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="The MyBatis Team" />
    <meta name="Date-Revision-yyyymmdd" content="20130324" />
    <meta http-equiv="Content-Language" content="es" />
    <title>MyBatis - 
    MyBatis-Spring | Primeros pasos</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis-Spring</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.com/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Publicado el: 24 marzo 2013</li>
                  <li class="divider">|</li> <li id="projectVersion">Versión: 1.2.1-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Manual de Referencia</li>
                                
      <li>
    
                          <a href="index.html" title="Introducción">
          <i class="none"></i>
        Introducción</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Primeros pasos</a>
          </li>
                  
      <li>
    
                          <a href="factorybean.html" title="SqlSessionFactoryBean">
          <i class="none"></i>
        SqlSessionFactoryBean</a>
            </li>
                                                                                                        
      <li>
    
                          <a href="transactions.html" title="Transacciones">
          <i class="icon-chevron-right"></i>
        Transacciones</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="sqlsession.html" title="Uso de SqlSession">
          <i class="icon-chevron-right"></i>
        Uso de SqlSession</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="mappers.html" title="Inyección de Mappers">
          <i class="icon-chevron-right"></i>
        Inyección de Mappers</a>
                  </li>
                  
      <li>
    
                          <a href="using-api.html" title="Uso del API de MyBatis">
          <i class="none"></i>
        Uso del API de MyBatis</a>
            </li>
                  
      <li>
    
                          <a href="batch.html" title="Spring Batch">
          <i class="none"></i>
        Spring Batch</a>
            </li>
                  
      <li>
    
                          <a href="sample.html" title="Código de ejemplo">
          <i class="none"></i>
        Código de ejemplo</a>
            </li>
                              <li class="nav-header">Documentación del proyecto</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Información del proyecto">
          <i class="icon-chevron-right"></i>
        Información del proyecto</a>
                  </li>
                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-reports.html" title="Informes del proyecto">
          <i class="icon-chevron-right"></i>
        Informes del proyecto</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Generado por Maven" class="poweredBy">
        <img class="builtBy" alt="Generado por Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2012 The MyBatis Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section"><h2>Primeros pasos<a name="Primeros_pasos"></a></h2>
      <p>
        Este cap&#xed;tulo te mostrar&#xe1; en pocos pasos c&#xf3;mo instalar y configurar MyBatis-Spring y c&#xf3;mo construir
        una peque&#xf1;a aplicaci&#xf3;n transaccional.
      </p>

    <div class="section"><h3>Instalaci&#xf3;n<a name="Instalacin"></a></h3>
      <p>
        Para usar el m&#xf3;dulo MyBatis-Spring, debes incluir el fichero
        <tt>
          mybatis-spring-x.x.x.jar
        </tt>
        y sus dependencias en el classpath.
      </p>
      <p>
        Si usas Maven simplemente a&#xf1;ade la siguiente dependencia a tu pom.xml:
      </p>
      <div class="source"><pre class="prettyprint">
&lt;dependency&gt;
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre></div>
    </div>

    <div class="section"><h3>Configuraci&#xf3;n r&#xe1;pida<a name="Configuracin_rpida"></a></h3>
      <p>
        Para usar MyBatis con Spring necesitas definir al menos dos cosas en tu contexto Spring: una
        <tt>SqlSessionFactory</tt> y al menos un mapper interface.
      </p>

      <p>
        En MyBatis-Spring se usa un 
        <tt>SqlSessionFactoryBean</tt>
        para crear una 
        <tt>SqlSessionFactory</tt>
        . Para configurar la factory bean pon lo siguiente en tu 
        fichero de configuraci&#xf3;n XML de Spring:
      </p>

        <div class="source"><pre class="prettyprint">
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
&lt;/bean&gt;</pre></div>

      <p>
        Observa que la <tt>SqlSessionFactory</tt>
        requiere un
        <tt>DataSource</tt>
        . &#xc9;ste puede ser cualquier 
        <tt>DataSource</tt>
        y debe configurarse como cualquier otra conexi&#xf3;n a base de datos
        de Spring.
      </p>

      <p>
        Asumamos que tienes un mapper interface definido de la siguiente forma:
      </p>
        <div class="source"><pre class="prettyprint">public interface UserMapper {
  @Select(&quot;SELECT * FROM users WHERE id = #{userId}&quot;)
  User getUser(@Param(&quot;userId&quot;) String userId);
} </pre></div>

      <p>
        Este interface se a&#xf1;ade a Spring usando un 
        <tt>MapperFactoryBean</tt>
        de la siguiente forma:
      </p>
        <div class="source"><pre class="prettyprint">
&lt;bean id=&quot;userMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;
  &lt;property name=&quot;mapperInterface&quot; value=&quot;org.mybatis.spring.sample.mapper.UserMapper&quot; /&gt;
  &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;
&lt;/bean&gt;</pre></div>

      <p>
        Observa que la clase del mapper indicada
        <b>debe</b>
        ser un interface, no una implementaci&#xf3;n. En este ejemplo se usan
        anotaciones para especificar la SQL, pero tambi&#xe9;n es posible 
        usar un fichero de mapeo XML.
      </p>

      <p>
        Una vez configurado, puedes inyectar mappers directamente en tus
        beans de servicio/negocio de la misma forma que inyectar&#xed;as cualquier
        otro bean en Spring.
   	    La clase <tt>MapperFactoryBean</tt> se encargar&#xe1; de obtener 
   	    una <tt>SqlSession</tt> y de cerrarla. Si hay una transaci&#xf3;n Spring
   	    en curso, la sesi&#xf3;n se comitar&#xe1; o se har&#xe1; rollback cuando la transacci&#xf3;n
   	    finalice. Finalmente, cualquier excepci&#xf3;n ser&#xe1; traducida a una excepi&#xf3;n
        <tt>DataAccessException</tt>s de Spring.
      </p>

      <p>
        Invocar a MyBatis es s&#xf3;lo una l&#xed;nea de c&#xf3;digo:
      </p>
        <div class="source"><pre class="prettyprint">
public class FooServiceImpl implements FooService {

private UserMapper userMapper;

public void setUserMapper(UserMapper userMapper) {
  this.userMapper = userMapper;
}

public User doSomeBusinessStuff(String userId) {
  return this.userMapper.getUser(userId);
}</pre></div>
      </div>
    </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2013
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
