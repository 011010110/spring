<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-04-01 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>mybatis-spring &#x2013; MyBatis-Spring | Primeros pasos</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Hunter Presnall" />
      <meta name="author" content="Eduardo Macarron" />
    <meta name="Date-Revision-yyyymmdd" content="20160401" />
    <meta http-equiv="Content-Language" content="es" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                mybatis-spring
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Publicado el: 2016-04-01</span>
                  &nbsp;| <span id="projectVersion">Versión: 1.3.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Manual de Referencia</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introducción">Introducción</a>
            </li>
                  <li class="none">
            <strong>Primeros pasos</strong>
          </li>
                  <li class="none">
                          <a href="factorybean.html" title="SqlSessionFactoryBean">SqlSessionFactoryBean</a>
            </li>
                                                                                                        <li class="collapsed">
                          <a href="transactions.html" title="Transacciones">Transacciones</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="sqlsession.html" title="Uso de SqlSession">Uso de SqlSession</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="mappers.html" title="Inyección de Mappers">Inyección de Mappers</a>
                  </li>
                  <li class="none">
                          <a href="using-api.html" title="Uso del API de MyBatis">Uso del API de MyBatis</a>
            </li>
                  <li class="none">
                          <a href="batch.html" title="Spring Batch">Spring Batch</a>
            </li>
                  <li class="none">
                          <a href="sample.html" title="Código de ejemplo">Código de ejemplo</a>
            </li>
          </ul>
                       <h5>Documentación del proyecto</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Información del proyecto">Información del proyecto</a>
                  </li>
                                                                                                                                                                                                                                                                                                              <li class="collapsed">
                          <a href="project-reports.html" title="Informes del proyecto">Informes del proyecto</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Generado por Maven" class="poweredBy">
        <img class="poweredBy" alt="Generado por Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Copyright 2010-2012 the original author or authors.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section">
<h2><a name="Primeros_pasos"></a>Primeros pasos</h2>
      
<p>
        Este cap&#xed;tulo te mostrar&#xe1; en pocos pasos c&#xf3;mo instalar y configurar MyBatis-Spring y c&#xf3;mo construir
        una peque&#xf1;a aplicaci&#xf3;n transaccional.
      </p>

    
<div class="section">
<h3><a name="Instalacin"></a>Instalaci&#xf3;n</h3>
      
<p>
        Para usar el m&#xf3;dulo MyBatis-Spring, debes incluir el fichero
        <tt>
          mybatis-spring-x.x.x.jar
        </tt>
        y sus dependencias en el classpath.
      </p>
      
<p>
        Si usas Maven simplemente a&#xf1;ade la siguiente dependencia a tu pom.xml:
      </p>
      
<div class="source">
<pre>
&lt;dependency&gt;
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre></div>
    </div>

    
<div class="section">
<h3><a name="Configuracin_rpida"></a>Configuraci&#xf3;n r&#xe1;pida</h3>
      
<p>
        Para usar MyBatis con Spring necesitas definir al menos dos cosas en tu contexto Spring: una
        <tt>SqlSessionFactory</tt> y al menos un mapper interface.
      </p>

      
<p>
        En MyBatis-Spring se usa un 
        <tt>SqlSessionFactoryBean</tt>
        para crear una 
        <tt>SqlSessionFactory</tt>
        . Para configurar la factory bean pon lo siguiente en tu 
        fichero de configuraci&#xf3;n XML de Spring:
      </p>

        
<div class="source">
<pre>
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
&lt;/bean&gt;</pre></div>

      
<p>
        Observa que la <tt>SqlSessionFactory</tt>
        requiere un
        <tt>DataSource</tt>
        . &#xc9;ste puede ser cualquier 
        <tt>DataSource</tt>
        y debe configurarse como cualquier otra conexi&#xf3;n a base de datos
        de Spring.
      </p>

      
<p>
        Asumamos que tienes un mapper interface definido de la siguiente forma:
      </p>
        
<div class="source">
<pre>public interface UserMapper {
  @Select(&quot;SELECT * FROM users WHERE id = #{userId}&quot;)
  User getUser(@Param(&quot;userId&quot;) String userId);
} </pre></div>

      
<p>
        Este interface se a&#xf1;ade a Spring usando un 
        <tt>MapperFactoryBean</tt>
        de la siguiente forma:
      </p>
        
<div class="source">
<pre>
&lt;bean id=&quot;userMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;
  &lt;property name=&quot;mapperInterface&quot; value=&quot;org.mybatis.spring.sample.mapper.UserMapper&quot; /&gt;
  &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;
&lt;/bean&gt;</pre></div>

      
<p>
        Observa que la clase del mapper indicada
        <b>debe</b>
        ser un interface, no una implementaci&#xf3;n. En este ejemplo se usan
        anotaciones para especificar la SQL, pero tambi&#xe9;n es posible 
        usar un fichero de mapeo XML.
      </p>

      
<p>
        Una vez configurado, puedes inyectar mappers directamente en tus
        beans de servicio/negocio de la misma forma que inyectar&#xed;as cualquier
        otro bean en Spring.
   	    La clase <tt>MapperFactoryBean</tt> se encargar&#xe1; de obtener 
   	    una <tt>SqlSession</tt> y de cerrarla. Si hay una transaci&#xf3;n Spring
   	    en curso, la sesi&#xf3;n se comitar&#xe1; o se har&#xe1; rollback cuando la transacci&#xf3;n
   	    finalice. Finalmente, cualquier excepci&#xf3;n ser&#xe1; traducida a una excepi&#xf3;n
        <tt>DataAccessException</tt>s de Spring.
      </p>

      
<p>
        Invocar a MyBatis es s&#xf3;lo una l&#xed;nea de c&#xf3;digo:
      </p>
        
<div class="source">
<pre>
public class FooServiceImpl implements FooService {

private UserMapper userMapper;

public void setUserMapper(UserMapper userMapper) {
  this.userMapper = userMapper;
}

public User doSomeBusinessStuff(String userId) {
  return this.userMapper.getUser(userId);
}</pre></div>
      </div>
    </div>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010&#x2013;2016
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
