<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Feb 14, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="The MyBatis Team" />
    <meta name="Date-Revision-yyyymmdd" content="20130214" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis - 
    MyBatis-Spring | Spring Batch</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="index.html" id="bannerLeft" title="MyBatis logo">
                                                                                                <img src="../images/logo.png"  alt="MyBatis logo"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 14 February 2013</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.2.0-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Reference Documentation</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="getting-started.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li>
    
                          <a href="factorybean.html" title="SqlSessionFactoryBean">
          <i class="none"></i>
        SqlSessionFactoryBean</a>
            </li>
                                                                                                        
      <li>
    
                          <a href="transactions.html" title="Transactions">
          <i class="icon-chevron-right"></i>
        Transactions</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="sqlsession.html" title="Using an SqlSession">
          <i class="icon-chevron-right"></i>
        Using an SqlSession</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="mappers.html" title="Injecting Mappers">
          <i class="icon-chevron-right"></i>
        Injecting Mappers</a>
                  </li>
                  
      <li>
    
                          <a href="using-api.html" title="Using the MyBatis API">
          <i class="none"></i>
        Using the MyBatis API</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Spring Batch</a>
          </li>
                  
      <li>
    
                          <a href="sample.html" title="Sample Code">
          <i class="none"></i>
        Sample Code</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2013 The MyBatis Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
    <div class="section"><h2>Spring Batch<a name="Spring_Batch"></a></h2>
      <p>
        As of version 1.1.0 MyBatis-Spring provides two beans for building Spring Batch applications: the <tt>MyBatisPagingItemReader</tt> 
        and the <tt>MyBatisBatchItemWriter</tt>. Both beans and this documentation are ports of their corresponding iBATIS 2.x versions 
        that are provided by default by in the Spring Batch bundle.
      </p>
      
      <p>
        <span class="label important">NOTE</span>This about <a class="externalLink" href="http://static.springsource.org/spring-batch/">Spring Batch</a> and not
        about MyBatis batch SqlSessions. For information about batch sessions go to section: Using an SqlSession.
      </p>
      
      <div class="section"><h3>MyBatisPagingItemReader<a name="MyBatisPagingItemReader"></a></h3>
        <p>
          This bean is an <tt>IteamReader</tt> that reads records from a database using MyBatis in a paging fashion.
        </p>
        
		<p>
		  It executes the query specified as the setQueryId property to retrieve requested data. 
		  The query is executed using paged requests of a size specified in setPageSize property. 
		  Additional pages are requested when needed as <tt>read()</tt> method is called, returning an object corresponding
          to current position. 
          
          Some standard query parameters are provided by the reader and the SQL in the named query must use some or all of these parameters
          (depending on the SQL variant) to construct a result set of the required size. The parameters are:
        </p>

		 <ul>
		 <li><tt>_page</tt>: the page number to be read (starting at 0)</li>
		 <li><tt>_pagesize</tt>: the size of the pages, i.e. the number of rows to return</li>
		 <li><tt>_skiprows</tt>: the product of <tt>_page</tt> and
		 <tt>_pagesize</tt></li>
		 </ul>
 
        <p>Follows below a sample configuration snippet:</p>
        
        <div class="source"><pre class="prettyprint">&lt;bean id=&quot;reader&quot; class=&quot;org.mybatis.spring.batch.MyBatisPagingItemReader&quot;&gt;
  &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;
  &lt;property name=&quot;queryId&quot; value=&quot;getEmployee&quot; /&gt;
&lt;/bean&gt;</pre></div>
      </div>

      <div class="section"><h3>MyBatisBatchItemWriter<a name="MyBatisBatchItemWriter"></a></h3>
      
      <p>
        It is an <tt>ItemWriter</tt> that uses the batching features from <tt>SqlSessionTemplate</tt>
        to execute a batch of statements for all items provided.
      </p>
 
      <p>
        The user must provide an mapped statement id that will be executed when <tt>write()</tt> is called.
        It is expected that <tt>write()</tt> is called inside a transaction.<br />
      </p>
 
        <p>Follows below a sample configuration snippet:</p>
        
        <div class="source"><pre class="prettyprint">&lt;bean id=&quot;writer&quot; class=&quot;org.mybatis.spring.batch.MyBatisBatchItemWriter&quot;&gt;
  &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;
  &lt;property name=&quot;statementId&quot; value=&quot;updateEmployee&quot; /&gt;
&lt;/bean&gt;</pre></div>
 
      </div>
    </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2013
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
